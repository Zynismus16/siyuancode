# 思源笔记文档自动锁定脚本

此脚本用于自动锁定思源笔记中指定笔记本中的非当天文档，防止意外编辑历史笔记。

## 功能说明

1. 拦截思源笔记的 `/api/attr/setBlockAttrs` API请求
2. 检查文档是否属于指定的笔记本
3. 如果属于指定笔记本，检查文档ID的前8位日期是否为当天
4. 对于非当天的文档，强制将其锁定状态 `custom-sy-readonly` 设置为 `true`
5. 当锁定非当天文档时，在页面顶部显示红色弹窗提示

## 使用方法

1. 打开思源笔记
2. 按 F12 打开开发者工具
3. 切换到"控制台"标签
4. 复制 `api_interceptor.js` 中的全部代码并粘贴到控制台中执行
5. 看到 "思源笔记API拦截器已加载，目标笔记本ID: xxxxxx" 消息即表示脚本已生效

## 配置

在脚本顶部可以修改 `targetBoxID` 变量值，设置为需要自动锁定非当天文档的笔记本ID。

```javascript
// 全局设置笔记本ID - 需要根据实际情况修改
const targetBoxID = "20250504014556-yhxfxy7"; // 这里设置需要特殊处理的笔记本ID
```

## 弹窗提示

当脚本锁定非当天文档时，会在页面顶部显示红色弹窗提示，内容为：

> 🔒 该日记（YYYY-MM-DD）非当前时间，已永久锁定

弹窗会在显示3秒后自动消失。

## 注意事项

1. 此脚本需要在每次打开思源笔记后重新执行
2. 如果需要永久使用，可以考虑将其作为思源笔记的挂件或插件
3. 脚本仅影响属于指定笔记本中的非当天文档的锁定状态设置 